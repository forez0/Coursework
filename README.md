# Система рекомендацій фільмів на основі минулих чатів

Цей проєкт реалізує рекомендаційну систему, яка аналізує дані про фільми та взаємодії користувачів для надання персоналізованих рекомендацій. Система побудована на фреймворку Django з використанням Celery для асинхронної обробки завдань (наприклад, перенавчання моделі LightFM) та Redis як брокера повідомлень.

---

## 1. Інструкція для запуску проєкту

Для успішного запуску проєкту виконайте наступні кроки:

1.  **Встановлення залежностей:**
    Встановіть усі необхідні Python-бібліотеки з файлу `requirements.txt`:
    ```bash
    pip install -r requirements.txt
    ```

2.  **Вхід у директорію проєкту:**
    Перейдіть до головної директорії проєкту `film_recommender`:
    ```bash
    cd film_recommender
    ```

3.  **Налаштування та запуск Redis:**
    Redis використовується як брокер повідомлень для Celery. Запустіть його за допомогою Docker:
    ```bash
    docker run -d --name redis -p 6379:6379 redis
    ```
    *Переконайтеся, що Docker встановлено та запущено на вашій системі.*

4.  **Запуск воркера Celery:**
    Celery відповідає за виконання асинхронних завдань, таких як навчання моделі. Запустіть його в окремому терміналі:
    ```bash
    celery -A film_recommender worker -l info -P eventlet
    ```

5.  **Запуск Django Development Server:**
    У новому терміналі запустіть веб-сервер Django:
    ```bash
    python manage.py runserver
    ```

Тепер ви можете отримати доступ до програми за адресою: [http://127.0.0.1:8000/](http://127.0.0.1:8000/) у вашому веб-браузері.
Панель адміністратора Django доступна за адресою: [http://127.0.0.1:8000/admin/](http://127.0.0.1:8000/admin/).

---

## 2. Опис файлів та директорій проєкту

### Директорія `film_recommender`

Ця директорія є головним пакетом Django-проєкту, що містить глобальні налаштування та точки входу веб-додатку.

* `__init__.py`: Порожній файл, що позначає директорію як Python-пакет.
* `asgi.py`: Точка входу для ASGI-серверів, що дозволяє асинхронні операції (веб-сокети, HTTP/2).
* `settings.py`: Головний файл конфігурації Django-проєкту (встановлені застосунки, база даних, SECRET_KEY, налаштування Celery та інше).
* `urls.py`: Головний файл маршрутизації URL для всього проєкту.
* `wsgi.py`: Точка входу для WSGI-серверів, використовується для розгортання проєкту.
* `celery.py`: Конфігурація бібліотеки Celery для асинхронної обробки завдань та планування періодичних завдань (наприклад, перенавчання моделі).
* `tests.py` (опціонально): Може містити інтеграційні тести проєкту.

### Директорія `recommender`

Це основний Django-застосунок, що інкапсулює логіку управління користувачами, фільмами, оцінками та рекомендаційною системою.

#### Піддиректорії:

* `management/`: Містить користувацькі команди управління Django (наприклад, для ручного запуску перенавчання моделі).
* `migrations/`: Зберігає файли міграцій бази даних, що описують зміни у схемі.
* `ml/`: Призначена для коду, що стосується машинного навчання.
    * `lightfm_model.py`: Містить логіку ініціалізації, підготовки даних, навчання, генерації рекомендацій та серіалізації моделі LightFM.
* `templatetags/`: Містить користувацькі теги шаблонів Django для розширення функціоналу шаблонів.

#### Файли в корені `recommender/`:

* `__init__.py`: Позначає `recommender` як Python-пакет.
* `admin.py`: Реєстрація моделей Django в адміністративній панелі.
* `apps.py`: Конфігурація Django-застосунку.
* `forms.py`: Визначення Django-форм для обробки введених даних (реєстрація, оцінки, пошук).
* `models.py`: Визначає моделі даних (User, Movie, Rating, UserRecommendation), що відображаються на таблиці в базі даних.
* `serializers.py`: Визначення серіалізаторів Django REST Framework для перетворення даних моделей у JSON/XML.
* `tasks.py`: Містить асинхронні завдання Celery, такі як функція `train_recommendation_model` для навчання моделі LightFM.
* `tests.py`: Автоматизовані тести для функціональності застосунку.
* `urls.py`: Визначає URL-шляхи, специфічні для застосунку `recommender`.
* `utils.py`: Містить допоміжні функції для інтеграції з TMDb API (кешування, обробка помилок, імпорт даних про фільми).
* `views.py`: Логіка обробки HTTP-запитів, включаючи традиційні Django view-функції та класи ViewSet Django REST Framework. Реалізує функціонал керування користувачами, фільмами, оцінками та персональними рекомендаціями (з асинхронним запуском через Celery).
